/*
 * @Author: xing 1981193009@qq.com
 * @Date: 2022-05-11 14:24:45
 * @LastEditors: xing 1981193009@qq.com
 * @LastEditTime: 2022-05-15 21:10:54
 * @FilePath: \newdemo - 副本\js\public.js
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 */
window.config={url:"http://svip.aeert.com:18081",more:["classification","color","tag"],classification:[],color:[],tag:[],classParams:{},laypage:{curr:1,limit:20},isLogin:!1,loginInfo:{}};window.service=function(a){return new Promise(function(b,c){$.ajax({url:config.url+a.url,type:a.type,data:"post"==a.type?JSON.stringify(a.data):a.data,headers:{token:config.loginInfo.token?config.loginInfo.token:""},contentType:"application/json;charset\x3dUTF-8",success:function(a){"token\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55"===a.msg&&(layer.msg(a.msg,{icon:5,anim:6}),localStorage.removeItem("user"),isLogin());500==a.code&&layer.msg(a.msg,{icon:5,anim:6});b(a)},error:function(a,b,d){layer.msg(b,{icon:5,anim:6,offset:"100px"});c(a.statusText)}})})};window.GetRequest=function(){var a=location.search,b={};if(-1!=a.indexOf("?"))for(var a=a.substr(1).split("\x26"),c=0;c<a.length;c++)b[a[c].split("\x3d")[0]]=unescape(a[c].split("\x3d")[1]);return b};window.userInfoApi=function(){return service({url:"/api/userInfo",type:"get"})};window.setMealApi=function(){return service({url:"/api/order/setMeal",type:"get"})};window.downApi=function(a){return service({url:"/api/static/down",type:"get",data:a})};window.createOrderApi=function(a){return service({url:"/api/order/create",type:"post",data:a})};window.captchaApi=function(){return service({url:"/api/captcha.jpg",type:"get"})};window.loginApi=function(a){return service({url:"/api/login",type:"post",data:a})};window.logoutApi=function(){return service({url:"/api/logout",type:"post"})};window.registerApi=function(a){return service({url:"/api/register",type:"post",data:a})};window.sendMailApi=function(a){return service({url:"/api/sendMail",type:"get",data:a})};window.getMoreClass=function(){return service({url:"/api/static/base",type:"get"})};window.collection=function(a){return service({url:"/api/static/collection",type:"get",data:a})};window.getDetail=function(a){return service({url:"/api/static/detail",type:"get",data:a})};window.downTemplate=function(){return service({url:"/api/static/down",type:"get"})};window.templatePage=function(a){return service({url:"/api/static/page",type:"post",data:a})};window.contentWayPoint=function(){var a=0;$(".animate-box").waypoint(function(b){"down"!==b||$(this.element).hasClass("animated")||(a++,$(this.element).addClass("item-animate"),setTimeout(function(){$("body .animate-box.item-animate").each(function(a){var b=$(this);setTimeout(function(){b.addClass("fadeInUp animated");b.removeClass("item-animate")},200*a,"easeInOutExpo")})},100))},{offset:"85%"})};var isiPad=function(){return-1!=navigator.platform.indexOf("iPad")},isiPhone=function(){return-1!=navigator.platform.indexOf("\x3ci\x3e\x3c/i\x3ePhone")||-1!=navigator.platform.indexOf("iPod")};window.mobileMenuOutsideClick=function(){$(document).click(function(a){var b=$("#fh5co-offcanvas, .js-fh5co-close-offcanvas");!b.is(a.target)&&0===b.has(a.target).length&&"none"==$("#fh5co-dialog").css("display")&&$("#fh5co-offcanvas").hasClass("animated fadeInRight")&&($("#fh5co-offcanvas").addClass("animated fadeOutRight"),setTimeout(function(){$("#fh5co-offcanvas").css("display","none");$("#fh5co-offcanvas").removeClass("animated fadeOutRight fadeInRight")},1E3),$(".js-fh5co-nav-toggle").removeClass("active"));$("#layui-nav").hasClass("animated fadeInLeft")&&"block"==$("#layui-nav").css("display")&&1200>$("body").width()&&($("#layui-nav").addClass("animated fadeOutLeft"),setTimeout(function(){$("#layui-nav").css("display","none");$("#layui-nav").removeClass("animated fadeOutLeft fadeInLeft")},1E3))});$("body").on("click",".js-fh5co-close-offcanvas",function(a){$("#fh5co-offcanvas").addClass("animated fadeOutRight");setTimeout(function(){$("#fh5co-offcanvas").css("display","none");$("#fh5co-offcanvas").removeClass("animated fadeOutRight fadeInRight")},1E3);$(".js-fh5co-nav-toggle").removeClass("active");a.preventDefault()});$(".js-lay-nav").click(function(){$("#layui-nav").addClass("animated fadeInLeft");setTimeout(function(){$("#layui-nav").css("display","block")},100)})};window.burgerMenu=function(){$("body").on("click",".js-fh5co-nav-toggle",function(a){var b=$(this);$("#fh5co-offcanvas").css("display","block");setTimeout(function(){$("#fh5co-offcanvas").addClass("animated fadeInRight")},100);b.toggleClass("active");a.preventDefault()})};window.scrolledWindow=function(){$(window).scroll(function(){var a=$("#fh5co-header"),b=$(this).scrollTop();$("#fh5co-home .flexslider .fh5co-overlay").css({opacity:.5+b/2E3});120<b?a.addClass("header-top"):a.removeClass("header-top");$("body").hasClass("offcanvas-visible")&&($("body").removeClass("offcanvas-visible"),$(".js-fh5co-nav-toggle").removeClass("active"))});$(window).resize(function(){$("body").hasClass("offcanvas-visible")&&($("body").removeClass("offcanvas-visible"),$(".js-fh5co-nav-toggle").removeClass("active"))})};window.clickMenu=function(){var a=769>$(window).width()?0:58;$(window).resize(function(){a=769>$(window).width()?0:58});"#"!=$(this).attr("href")&&$('#fh5co-main-nav a:not([class\x3d"external"]), #fh5co-offcanvas a:not([class\x3d"external"])').click(function(b){var c=$(this).data("nav-section");$('div[data-section\x3d"'+c+'"]').length&&$("html, body").animate({scrollTop:$('div[data-section\x3d"'+c+'"]').offset().top-a},500);b.preventDefault()})};window.isLogin=function(){if(localStorage.getItem("user")){config.isLogin=!0;config.loginInfo=JSON.parse(localStorage.getItem("user"));var a=JSON.parse(localStorage.getItem("user")).userInfo;$(".login-btn").hide();$(".collection").show();$(".username").show().html('\n        \x3cimg src\x3d"'+a.qqImg+'" class\x3d"layui-nav-img" /\x3e\n        \x3cspan\x3e'+a.username+'\x3c/span\x3e\n        \x3ci class\x3d"layui-icon layui-icon-down layui-nav-more"\x3e\x3c/i\x3e\n        ');$("#fh5co-offcanvas").html('\n        \x3ca href\x3d"#" class\x3d"fh5co-close-offcanvas js-fh5co-close-offcanvas"\x3e\x3cspan\x3e\x3ci class\x3d"icon-cross3"\x3e\x3c/i\x3e \x3cspan\x3eClose\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\n            \x3cdiv class\x3d"fh5co-bio" style\x3d"width: 100%"\x3e\n                \x3cfigure\x3e\n                    \x3cimg\n                        src\x3d"'+a.qqImg+'"\n                        alt\x3d"Free HTML5 Bootstrap Template"\n                        id\x3d"userImg"\n                        class\x3d"img-responsive"\n                    /\x3e\n                \x3c/figure\x3e\n                \x3ch3 class\x3d"heading"\x3e'+a.username+"\x3c/h3\x3e\n                \x3cdiv style\x3d'margin-bottom: 20px;'\x3e \n                \x3cspan\x3e\u5269\u4f59\u4e0b\u8f7d\u6b21\u6570\uff1a"+a.downTimes+"\x3c/span\x3e\n                \x3cbutton type\x3d\"button\" style\x3d'margin-left: 20px;' class\x3d\"layui-btn layui-btn-sm layui-btn-primary\" onclick\x3d'topUp()'\x3e\u5145\u503c\x3c/button\x3e\n                \x3c/div\x3e\n                \n                \x3cp style\x3d'margin-bottom:20px;font-size: 20px;'\x3e\u4f1a\u5458\u6709\u6548\u671f\u81f3:"+a.openTime+'\x3c/p\x3e\n                \x3cul class\x3d"fh5co-social"\x3e\n\t\t\t\t\x3cli\x3e\x3ca href\x3d"#"\x3e\x3ci class\x3d"icon-twitter"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\n\t\t\t\t\x3cli\x3e\x3ca href\x3d"#"\x3e\x3ci class\x3d"icon-facebook"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\n\t\t\t\t\x3cli\x3e\x3ca href\x3d"#"\x3e\x3ci class\x3d"icon-instagram"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\n\t\t\t    \x3c/ul\x3e\n                \x3cdiv class\x3d\'loginOut\'\x3e\x3cbutton type\x3d"button" class\x3d"layui-btn layui-btn-primary" onclick\x3d\'loginOut()\'\x3e\u9000\u51fa\u767b\u5f55\x3c/button\x3e\x3c/div\x3e\n            \x3c/div\x3e\n        ')}else config.isLogin=!1,$(".username").hide(),$(".login-btn").show(),$(".collection").hide(),$(".js-fh5co-close-offcanvas").click()};window.loginOut=function(){logoutApi({token:config.loginInfo.token}).then(function(a){localStorage.removeItem("user");isLogin()})};window.topUp=function(){$("body").attr("style","overflow:hidden");$(".dialog-title").eq(0).text("\u5145\u503c");$("#fh5co-dialog").show();$("#topUp-form").show();$("#register-form").hide();$("#login-form").hide()};$(function(){mobileMenuOutsideClick();burgerMenu();scrolledWindow();contentWayPoint();isLogin()});